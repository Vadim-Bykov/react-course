(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5431:function(e,t,s){Promise.resolve().then(s.bind(s,9942))},9942:function(e,t,s){"use strict";s.r(t),s.d(t,{HomePage:function(){return d}});var n=s(7437),r=s(7562),a=s(4505),u=s(4302),o=s(6349),c=s(2067),l=s.n(c),i=s(2265);function d(){(0,a.TL)();let[e,t]=(0,i.useState)(""),[s,c]=(0,i.useState)(""),{data:d,status:h,error:m,refetch:f}=(0,r.ws)(),[y]=(0,r.u3)(),g=()=>{t(""),c("")};return(0,n.jsxs)("main",{children:[(0,n.jsx)("section",{className:"mb-9",children:(0,n.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e&&s&&y({title:e,content:s,id:(0,u.nanoid)(),publishedAt:l()().format("DD/MM/YYYY HH:mm:ss")}),g()},children:[(0,n.jsx)("input",{value:e,typeof:"title",placeholder:"Enter title",onChange:e=>{e.target.value.trim()&&t(e.target.value)},className:"mb-2"}),(0,n.jsx)("br",{}),(0,n.jsx)("input",{value:s,typeof:"content",placeholder:"Enter content",onChange:e=>{e.target.value.trim()&&c(e.target.value)},className:"mb-2"}),(0,n.jsx)("br",{}),(0,n.jsx)("button",{type:"submit",children:"Submit"})]})}),(()=>{switch(h){case o.QueryStatus.fulfilled:return(0,n.jsx)(p,{posts:d});case o.QueryStatus.pending:case o.QueryStatus.uninitialized:return(0,n.jsx)("h1",{children:"Loading..."});case o.QueryStatus.rejected:return(0,n.jsx)("h1",{className:"text-red-600",children:JSON.stringify(m)});default:return null}})()]})}let p=e=>{let{posts:t}=e;return(0,n.jsx)("section",{children:null==t?void 0:t.map(e=>{let{id:t,title:s,content:r,publishedAt:a}=e;return(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold",children:"id:"})," ",t]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold",children:"title:"})," ",s]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold",children:"content:"})," ",r]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-bold",children:"date:"})," ",a]})]},t)})})}},7562:function(e,t,s){"use strict";s.d(t,{Bb:function(){return a},u3:function(){return c},ws:function(){return o}});var n=s(8324),r=s(2967);let a=(0,n.LC)({reducerPath:"api",tagTypes:["Posts"],baseQuery:(0,r.ni)({baseUrl:"http://localhost:3500/"}),endpoints:e=>({getPosts:e.query({query:()=>"posts",providesTags:["Posts"]}),getPost:e.query({query:e=>{let{postId:t}=e;return"posts/".concat(t)}}),createPost:e.mutation({query:e=>({url:"posts",method:"POST",body:e}),invalidatesTags:["Posts"]})})}),{useGetPostQuery:u,useGetPostsQuery:o,useCreatePostMutation:c}=a},4505:function(e,t,s){"use strict";s.d(t,{h:function(){return j},TL:function(){return x}});var n=s(4302),r=s(1023);let a=(0,n.createSlice)({name:"counter",initialState:{count:1},reducers:{increment:e=>{e.count+=1},decrement:e=>{e.count-=1},reset:e=>{e.count=0},incrementByAmount:(e,t)=>{e.count+=t.payload}}}),{increment:u,decrement:o,reset:c,incrementByAmount:l}=a.actions,i=a.reducer;var d=s(9222);let p="https://jsonplaceholder.org/posts",h=(0,n.createAsyncThunk)("posts/fetchPosts",async()=>{try{let e=await d.Z.get(p);return e.data}catch(e){return e.message}}),m=(0,n.createAsyncThunk)("posts/addNewPost",async e=>{console.log({newPost:e});try{let t=await d.Z.post(p,e);return t.data}catch(e){return e.message}}),f=(0,n.createSlice)({name:"counter",initialState:{posts:[],status:"idle",error:null},reducers:{addPost:(e,t)=>{e.posts.push({id:(0,n.nanoid)(),publishedAt:new Date().toISOString(),...t.payload})}},extraReducers:e=>{e.addCase(h.pending,(e,t)=>{e.status="loading"}).addCase(h.fulfilled,(e,t)=>{e.status="succeed",e.posts=[...e.posts,...t.payload]}).addCase(h.rejected,(e,t)=>{e.status="failed",e.error=t.error.message}).addCase(m.fulfilled,(e,t)=>{console.log({payload:t.payload}),e.posts.push(t.payload)})}}),{addPost:y}=f.actions,g=f.reducer;var b=s(7562);let j=(0,n.configureStore)({reducer:{counter:i,posts:g,[b.Bb.reducerPath]:b.Bb.reducer},middleware:e=>e().concat(b.Bb.middleware)}),x=r.I0}},function(e){e.O(0,[990,607,827,971,596,744],function(){return e(e.s=5431)}),_N_E=e.O()}]);